{"meta":{"title":"é˜¿å¸…","subtitle":"","description":"è¿™æ˜¯ä¸€ä¸ªå…³äºæŠ€æœ¯åˆ†äº«ã€ç”Ÿæ´»æ„Ÿæ‚Ÿå’Œåˆ›æ„çµæ„Ÿçš„åšå®¢ã€‚","author":"byte76","url":"https://Jiang07Shuai06.github.io","root":"/"},"pages":[{"title":"åˆ†ç±»","date":"2024-12-22T02:45:03.000Z","updated":"2024-12-22T02:46:40.212Z","comments":true,"path":"categories/index.html","permalink":"https://jiang07shuai06.github.io/categories/index.html","excerpt":"","text":""},{"title":"","date":"2024-12-22T03:25:02.750Z","updated":"2024-12-22T03:25:02.750Z","comments":true,"path":"about/index.html","permalink":"https://jiang07shuai06.github.io/about/index.html","excerpt":"","text":"ğŸŒ¹ğŸŒ¹ğŸ˜ğŸ˜ƒ â›·ï¸ğŸ’«"},{"title":"å‹æƒ…é“¾æ¥","date":"2020-05-13T06:16:07.000Z","updated":"2024-12-22T03:13:56.308Z","comments":true,"path":"links/index.html","permalink":"https://jiang07shuai06.github.io/links/index.html","excerpt":"","text":""},{"title":"æˆ‘çš„æœ‹å‹ä»¬","date":"2024-10-11T11:48:27.035Z","updated":"2024-09-20T04:38:41.238Z","comments":true,"path":"friends/index.html","permalink":"https://jiang07shuai06.github.io/friends/index.html","excerpt":"è¿™é‡Œå†™å‹é“¾ä¸Šæ–¹çš„å†…å®¹ã€‚","text":"è¿™é‡Œå†™å‹é“¾ä¸Šæ–¹çš„å†…å®¹ã€‚ è¿™é‡Œå¯ä»¥å†™å‹é“¾é¡µé¢ä¸‹æ–¹çš„æ–‡å­—å¤‡æ³¨ï¼Œä¾‹å¦‚è‡ªå·±çš„å‹é“¾è§„èŒƒã€ç¤ºä¾‹ç­‰ã€‚"},{"title":"æ ‡ç­¾","date":"2024-12-22T03:45:14.000Z","updated":"2024-12-22T03:21:46.428Z","comments":true,"path":"tags/index.html","permalink":"https://jiang07shuai06.github.io/tags/index.html","excerpt":"","text":""},{"title":"ç›¸å†Œ","date":"2023-05-14T03:45:14.000Z","updated":"2024-12-22T03:26:00.812Z","comments":true,"path":"masonry/index.html","permalink":"https://jiang07shuai06.github.io/masonry/index.html","excerpt":"","text":""}],"posts":[{"title":"iptables(1) | iptablesæ¦‚å¿µ","slug":"iptables-1-iptablesæ¦‚å¿µ","date":"2025-01-06T03:29:01.000Z","updated":"2025-01-06T03:32:01.300Z","comments":true,"path":"2025/01/06/iptables-1-iptablesæ¦‚å¿µ/","permalink":"https://jiang07shuai06.github.io/2025/01/06/iptables-1-iptables%E6%A6%82%E5%BF%B5/","excerpt":"","text":"ç›¸å…³æ¦‚å¿µé˜²ç«å¢™ä»é€»è¾‘ä¸Šå¯ä»¥åˆ†ä¸ºä¸»æœºé˜²ç«å¢™å’Œç½‘ç»œé˜²ç«å¢™ ä¸»æœºé˜²ç«å¢™ï¼šé’ˆå¯¹å•ä¸ªä¸»æœºè¿›è¡Œé˜²æŠ¤ã€‚ ç½‘ç»œé˜²ç«å¢™ï¼šå¾€å¾€å¤„äºç½‘ç»œå…¥å£ï¼Œé’ˆå¯¹äºç½‘ç»œå…¥å£è¿›è¡Œé˜²æŠ¤ï¼ŒæœåŠ¡äºé˜²ç«å¢™èƒŒåçš„æœ¬åœ°å±€åŸŸç½‘ã€‚ ç½‘ç»œé˜²ç«å¢™å’Œä¸»æœºé˜²ç«å¢™å¹¶ä¸å†²çªï¼Œå¯ä»¥ç†è§£ä¸ºï¼Œç½‘ç»œé˜²ç«å¢™ä¸»å¤–ï¼ˆé›†ä½“ï¼‰ï¼Œ ä¸»æœºé˜²ç«å¢™ä¸»å†…ï¼ˆä¸ªäººï¼‰ã€‚ é˜²ç«å¢™ä»ç‰©ç†ä¸Šå¯ä»¥åˆ†ä¸ºç¡¬ä»¶é˜²ç«å¢™å’Œè½¯ä»¶é˜²ç«å¢™ ç¡¬ä»¶é˜²ç«å¢™ï¼šç¡¬ä»¶é˜²ç«å¢™æ˜¯ä¸€ç§ä¸“é—¨è®¾è®¡çš„ç½‘ç»œå®‰å…¨è®¾å¤‡ï¼Œå®ƒåŸºäºç¡¬ä»¶å¹³å°è¿è¡Œï¼Œæ€§èƒ½é«˜ï¼Œæˆæœ¬é«˜ã€‚ è½¯ä»¶é˜²ç«å¢™ï¼šè½¯ä»¶é˜²ç«å¢™æ˜¯å®‰è£…åœ¨è®¡ç®—æœºæ“ä½œç³»ç»Ÿæˆ–ç½‘ç»œè®¾å¤‡æ“ä½œç³»ç»Ÿä¸­çš„è½¯ä»¶ç¨‹åºã€‚æ€§èƒ½ä½ï¼Œæˆæœ¬ä½ã€‚&nbsp; å…³äºiptables![iptables](https://i-blog.csdnimg.cn/direct/42ae65a590e4497288734c175aba00f5.jpeg#pic_center &#x3D;x400)iptables å…¶å®ä¸æ˜¯çœŸæ­£çš„é˜²ç«å¢™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒç†è§£æˆä¸€ä¸ªå®¢æˆ·ç«¯ä»£ç†ï¼Œç”¨æˆ·é€šè¿‡iptablesè¿™ä¸ªä»£ç†ï¼Œå°†ç”¨æˆ·çš„å®‰å…¨è®¾å®šæ‰§è¡Œåˆ°å¯¹åº”çš„â€å®‰å…¨æ¡†æ¶â€ä¸­ï¼Œè¿™ä¸ªâ€å®‰å…¨æ¡†æ¶â€æ‰æ˜¯çœŸæ­£çš„é˜²ç«å¢™ï¼Œè¿™ä¸ªæ¡†æ¶çš„åå­—å« netfilterã€‚netfilter æ‰æ˜¯é˜²ç«å¢™çœŸæ­£çš„å®‰å…¨æ¡†æ¶ï¼ˆframeworkï¼‰ï¼Œnetfilterä½äºå†…æ ¸ç©ºé—´ã€‚ iptables å…¶å®æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œä½äºç”¨æˆ·ç©ºé—´ï¼Œæˆ‘ä»¬ç”¨è¿™ä¸ªå·¥å…·æ“ä½œçœŸæ­£çš„æ¡†æ¶ã€‚ netfilter&amp;iptables ç»„æˆLinuxå¹³å°ä¸‹çš„åŒ…è¿‡æ»¤é˜²ç«å¢™ï¼Œä¸å¤§å¤šæ•°çš„Linuxè½¯ä»¶ä¸€æ ·ï¼Œè¿™ä¸ªåŒ…è¿‡æ»¤é˜²ç«å¢™æ˜¯å…è´¹çš„ï¼Œå®ƒå¯ä»¥ä»£æ›¿æ˜‚è´µçš„å•†ä¸šé˜²ç«å¢™è§£å†³æ–¹æ¡ˆï¼Œå®Œæˆå°åŒ…è¿‡æ»¤ã€å°åŒ…é‡å®šå‘å’Œç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰ç­‰åŠŸèƒ½ã€‚ Netfilter æ˜¯ Linux å†…æ ¸ä¸­ç”¨äºå®ç°é˜²ç«å¢™ã€ç½‘ç»œåœ°å€è½¬æ¢ (NAT) å’ŒåŒ…è¿‡æ»¤çš„æ¡†æ¶ã€‚ç›¸å…³ç»„ä»¶iptablesï¼šæœ€å¸¸ç”¨çš„ç”¨æˆ·ç©ºé—´å·¥å…·ï¼Œç”¨äºé…ç½® Netfilter è§„åˆ™ã€‚nftablesï¼šæ˜¯ iptables çš„ç»§ä»»è€…ï¼Œæä¾›äº†æ›´å¼ºå¤§çš„åŠŸèƒ½å’Œæ›´ç®€æ´çš„è¯­æ³•ã€‚&nbsp; iptablesåŸºç¡€æˆ‘ä»¬çŸ¥é“iptablesæ˜¯æŒ‰ç…§è§„åˆ™æ¥åŠäº‹çš„ï¼Œæˆ‘ä»¬å°±æ¥è¯´è¯´è§„åˆ™ï¼ˆrulesï¼‰ï¼Œè§„åˆ™å…¶å®å°±æ˜¯ç½‘ç»œç®¡ç†å‘˜é¢„å®šä¹‰çš„æ¡ä»¶ï¼Œè§„åˆ™ä¸€èˆ¬çš„å®šä¹‰ä¸ºâ€å¦‚æœæ•°æ®åŒ…å¤´ç¬¦åˆè¿™æ ·çš„æ¡ä»¶ï¼Œå°±è¿™æ ·å¤„ç†è¿™ä¸ªæ•°æ®åŒ…â€ã€‚è§„åˆ™å­˜å‚¨åœ¨å†…æ ¸ç©ºé—´çš„ä¿¡æ¯åŒ…è¿‡æ»¤è¡¨ä¸­ï¼Œè¿™äº›è§„åˆ™åˆ†åˆ«æŒ‡å®šäº†æºåœ°å€ã€ç›®çš„åœ°å€ã€ä¼ è¾“åè®®ï¼ˆå¦‚TCPã€UDPã€ICMPï¼‰å’ŒæœåŠ¡ç±»å‹ï¼ˆå¦‚HTTPã€FTPå’ŒSMTPï¼‰ç­‰ã€‚å½“æ•°æ®åŒ…ä¸è§„åˆ™åŒ¹é…æ—¶ï¼Œiptableså°±æ ¹æ®è§„åˆ™æ‰€å®šä¹‰çš„æ–¹æ³•æ¥å¤„ç†è¿™äº›æ•°æ®åŒ…ï¼Œå¦‚æ”¾è¡Œï¼ˆacceptï¼‰ã€æ‹’ç»ï¼ˆrejectï¼‰å’Œä¸¢å¼ƒï¼ˆdropï¼‰ç­‰ã€‚é…ç½®é˜²ç«å¢™çš„ä¸»è¦å·¥ä½œå°±æ˜¯æ·»åŠ ã€ä¿®æ”¹å’Œåˆ é™¤è¿™äº›è§„åˆ™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬å¯ç”¨äº†é˜²ç«å¢™åŠŸèƒ½æ—¶ï¼ŒæŠ¥æ–‡éœ€è¦ç»è¿‡å¦‚ä¸‹å…³å¡ï¼Œé‚£ä¹ˆæ ¹æ®å®é™…æƒ…å†µçš„ä¸åŒï¼ŒæŠ¥æ–‡ç»è¿‡â€é“¾â€å¯èƒ½ä¸åŒã€‚å¦‚æœæŠ¥æ–‡éœ€è¦è½¬å‘ï¼Œé‚£ä¹ˆæŠ¥æ–‡åˆ™ä¸ä¼šç»è¿‡inputé“¾å‘å¾€ç”¨æˆ·ç©ºé—´ï¼Œè€Œæ˜¯ç›´æ¥åœ¨å†…æ ¸ç©ºé—´ä¸­ç»è¿‡forwardé“¾å’Œpostroutingé“¾è½¬å‘å‡ºå»çš„ã€‚åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿° æ‰€ä»¥ï¼Œæ ¹æ®ä¸Šå›¾ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæƒ³è±¡å‡ºæŸäº›å¸¸ç”¨åœºæ™¯ä¸­ï¼ŒæŠ¥æ–‡çš„æµå‘ï¼šåˆ°æœ¬æœºæŸè¿›ç¨‹çš„æŠ¥æ–‡ï¼šPREROUTING â€“&gt; INPUTç”±æœ¬æœºè½¬å‘çš„æŠ¥æ–‡ï¼šPREROUTING â€“&gt; FORWARD â€“&gt; POSTROUTINGç”±æœ¬æœºçš„æŸè¿›ç¨‹å‘å‡ºæŠ¥æ–‡ï¼ˆé€šå¸¸ä¸ºå“åº”æŠ¥æ–‡ï¼‰ï¼šOUTPUT â€“&gt; POSTROUTING é“¾çš„æ¦‚å¿µç°åœ¨ï¼Œæˆ‘ä»¬æƒ³è±¡ä¸€ä¸‹ï¼Œè¿™äº›â€å…³å¡â€åœ¨iptablesä¸­ä¸ºä»€ä¹ˆè¢«ç§°ä½œâ€é“¾â€å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œé˜²ç«å¢™çš„ä½œç”¨å°±åœ¨äºå¯¹ç»è¿‡çš„æŠ¥æ–‡åŒ¹é…â€è§„åˆ™â€ï¼Œç„¶åæ‰§è¡Œå¯¹åº”çš„â€åŠ¨ä½œâ€,æ‰€ä»¥ï¼Œå½“æŠ¥æ–‡ç»è¿‡è¿™äº›å…³å¡çš„æ—¶å€™ï¼Œåˆ™å¿…é¡»åŒ¹é…è¿™ä¸ªå…³å¡ä¸Šçš„è§„åˆ™ï¼Œä½†æ˜¯ï¼Œè¿™ä¸ªå…³å¡ä¸Šå¯èƒ½ä¸æ­¢æœ‰ä¸€æ¡è§„åˆ™ï¼Œè€Œæ˜¯æœ‰å¾ˆå¤šæ¡è§„åˆ™ï¼Œå½“æˆ‘ä»¬æŠŠè¿™äº›è§„åˆ™ä¸²åˆ°ä¸€ä¸ªé“¾æ¡ä¸Šçš„æ—¶å€™ï¼Œå°±å½¢æˆäº†â€é“¾â€,æ‰€ä»¥ï¼Œæˆ‘ä»¬æŠŠæ¯ä¸€ä¸ªâ€å…³å¡â€æƒ³è±¡æˆå¦‚ä¸‹å›¾ä¸­çš„æ¨¡æ · ï¼Œè¿™æ ·æ¥è¯´ï¼ŒæŠŠä»–ä»¬ç§°ä¸ºâ€é“¾â€æ›´ä¸ºåˆé€‚ï¼Œæ¯ä¸ªç»è¿‡è¿™ä¸ªâ€å…³å¡â€çš„æŠ¥æ–‡ï¼Œéƒ½è¦å°†è¿™æ¡â€é“¾â€ä¸Šçš„æ‰€æœ‰è§„åˆ™åŒ¹é…ä¸€éï¼Œå¦‚æœæœ‰ç¬¦åˆæ¡ä»¶çš„è§„åˆ™ï¼Œåˆ™æ‰§è¡Œè§„åˆ™å¯¹åº”çš„åŠ¨ä½œã€‚![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/69fa73eef0814250ac16d4afb81bba64.png#pic_center &#x3D;x400) è¡¨çš„æ¦‚å¿µæˆ‘ä»¬å†æƒ³æƒ³å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯¹æ¯ä¸ªâ€é“¾â€ä¸Šéƒ½æ”¾ç½®äº†ä¸€ä¸²è§„åˆ™ï¼Œä½†æ˜¯è¿™äº›è§„åˆ™æœ‰äº›å¾ˆç›¸ä¼¼ï¼Œæ¯”å¦‚ï¼ŒAç±»è§„åˆ™éƒ½æ˜¯å¯¹IPæˆ–è€…ç«¯å£çš„è¿‡æ»¤ï¼ŒBç±»è§„åˆ™æ˜¯ä¿®æ”¹æŠ¥æ–‡ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯èƒ½æŠŠå®ç°ç›¸åŒåŠŸèƒ½çš„è§„åˆ™æ”¾åœ¨ä¸€èµ·å‘¢ï¼Œå¿…é¡»èƒ½çš„ã€‚&nbsp;&nbsp;æˆ‘ä»¬æŠŠå…·æœ‰ç›¸åŒåŠŸèƒ½çš„è§„åˆ™çš„é›†åˆå«åšâ€è¡¨â€ï¼Œæ‰€ä»¥è¯´ï¼Œä¸åŒåŠŸèƒ½çš„è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾ç½®åœ¨ä¸åŒçš„è¡¨ä¸­è¿›è¡Œç®¡ç†ï¼Œè€Œiptableså·²ç»ä¸ºæˆ‘ä»¬å®šä¹‰äº†4ç§è¡¨ï¼Œæ¯ç§è¡¨å¯¹åº”äº†ä¸åŒçš„åŠŸèƒ½ï¼Œè€Œæˆ‘ä»¬å®šä¹‰çš„è§„åˆ™ä¹Ÿéƒ½é€ƒè„±ä¸äº†è¿™4ç§åŠŸèƒ½çš„èŒƒå›´ï¼Œæ‰€ä»¥ï¼Œå­¦ä¹ iptablesä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆææ˜ç™½æ¯ç§è¡¨ çš„ä½œç”¨ã€‚&nbsp;iptablesä¸ºæˆ‘ä»¬æä¾›äº†å¦‚ä¸‹è§„åˆ™çš„åˆ†ç±»ï¼Œæˆ–è€…è¯´ï¼Œiptablesä¸ºæˆ‘ä»¬æä¾›äº†å¦‚ä¸‹â€è¡¨â€&nbsp;&nbsp;filterè¡¨ï¼šè´Ÿè´£è¿‡æ»¤åŠŸèƒ½ï¼Œé˜²ç«å¢™ï¼›å†…æ ¸æ¨¡å—ï¼šiptables_filter natè¡¨ï¼šnetwork address translationï¼Œç½‘ç»œåœ°å€è½¬æ¢åŠŸèƒ½ï¼›å†…æ ¸æ¨¡å—ï¼šiptable_nat mangleè¡¨ï¼šæ‹†è§£æŠ¥æ–‡ï¼Œåšå‡ºä¿®æ”¹ï¼Œå¹¶é‡æ–°å°è£… çš„åŠŸèƒ½ï¼›iptable_mangle rawè¡¨ï¼šå…³é—­natè¡¨ä¸Šå¯ç”¨çš„è¿æ¥è¿½è¸ªæœºåˆ¶ï¼›iptable_raw ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰çš„æ‰€æœ‰è§„åˆ™ï¼Œéƒ½æ˜¯è¿™å››ç§åˆ†ç±»ä¸­çš„è§„åˆ™ï¼Œæˆ–è€…è¯´ï¼Œæ‰€æœ‰è§„åˆ™éƒ½å­˜åœ¨äºè¿™4å¼ â€è¡¨â€ä¸­ã€‚ è¡¨å’Œé“¾çš„å…³ç³»æŸäº›â€é“¾â€ä¸­æ³¨å®šä¸ä¼šåŒ…å«â€æŸç±»è§„åˆ™â€ï¼Œå°±åƒæŸäº›â€å…³å¡â€å¤©ç”Ÿå°±ä¸å…·å¤‡æŸäº›åŠŸèƒ½ä¸€æ ·ï¼Œæ¯”å¦‚ï¼ŒAâ€å…³å¡â€åªè´Ÿè´£æ‰“å‡»é™†åœ°æ•Œäººï¼Œæ²¡æœ‰é˜²ç©ºèƒ½åŠ›ï¼ŒBâ€å…³å¡â€åªè´Ÿè´£æ‰“å‡»ç©ºä¸­æ•Œäººï¼Œæ²¡æœ‰é˜²å¾¡æ­¥å…µçš„èƒ½åŠ›ï¼ŒCâ€å…³å¡â€å¯èƒ½æ¯”è¾ƒNBï¼Œæ—¢èƒ½é˜²ç©ºï¼Œä¹Ÿèƒ½é˜²å¾¡é™†åœ°æ•Œäººï¼ŒDâ€å…³å¡â€æœ€å±Œï¼Œæµ·é™†ç©ºéƒ½èƒ½é˜²ã€‚ è¿˜æ˜¯ä»¥å›¾ä¸ºä¾‹ï¼Œå…ˆçœ‹çœ‹preroutingâ€é“¾â€ä¸Šçš„è§„åˆ™éƒ½å­˜åœ¨äºå“ªäº›è¡¨ä¸­ã€‚æ³¨æ„ï¼š ä¸‹å›¾åªç”¨äºè¯´æ˜preroutingé“¾ä¸Šçš„è§„åˆ™å­˜åœ¨äºå“ªäº›è¡¨ä¸­ï¼Œå¹¶æ²¡æœ‰æè¿°è¡¨çš„é¡ºåºã€‚![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/97aa059eea79454f811eb25305ada1e6.png#pic_center &#x3D;x400) è¿™å¹…å›¾æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå®ƒçš„æ„æ€æ˜¯è¯´ï¼Œpreroutingâ€é“¾â€åªæ‹¥æœ‰natè¡¨ã€rawè¡¨å’Œmangleè¡¨æ‰€å¯¹åº”çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ï¼Œpreroutingä¸­çš„è§„åˆ™åªèƒ½å­˜æ”¾äºnatè¡¨ã€rawè¡¨å’Œmangleè¡¨ä¸­ã€‚ é‚£ä¹ˆï¼Œæ ¹æ®ä¸Šè¿°æ€è·¯ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ï¼Œæ¯ä¸ªâ€å…³å¡â€éƒ½æ‹¥æœ‰ä»€ä¹ˆåŠŸèƒ½ï¼Œ æˆ–è€…è¯´ï¼Œæ¯ä¸ªâ€é“¾â€ä¸­çš„è§„åˆ™éƒ½å­˜åœ¨äºå“ªäº›â€è¡¨â€ä¸­ã€‚ PREROUTING çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šrawè¡¨ã€mangleè¡¨ã€natè¡¨ã€‚ INPUT çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šmangleè¡¨ã€filterè¡¨ã€natè¡¨ã€‚ FORWARD çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šmangleè¡¨ã€filterè¡¨ã€‚ OUTPUT çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šrawè¡¨ã€mangleè¡¨ã€natè¡¨ã€filterè¡¨ã€‚ POSTROUTING çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šmangleè¡¨ã€natè¡¨ã€‚ ä½†æ˜¯ï¼Œæˆ‘ä»¬åœ¨å®é™…çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€æ˜¯é€šè¿‡â€è¡¨â€ä½œä¸ºæ“ä½œå…¥å£ï¼Œå¯¹è§„åˆ™è¿›è¡Œå®šä¹‰çš„ï¼Œä¹‹æ‰€ä»¥æŒ‰ç…§ä¸Šè¿°è¿‡ç¨‹ä»‹ç»iptablesï¼Œæ˜¯å› ä¸ºä»â€å…³å¡â€çš„è§’åº¦æ›´å®¹æ˜“ä»å…¥é—¨çš„è§’åº¦ç†è§£ï¼Œä½†æ˜¯ä¸ºäº†ä»¥ä¾¿åœ¨å®é™…ä½¿ç”¨çš„æ—¶å€™ï¼Œæ›´åŠ é¡ºç•…çš„ç†è§£å®ƒä»¬ï¼Œæ­¤å¤„æˆ‘ä»¬è¿˜è¦å°†å„â€è¡¨â€ä¸â€é“¾â€çš„å…³ç³»ç½—åˆ—å‡ºæ¥ï¼Œè¡¨ï¼ˆåŠŸèƒ½ï¼‰&lt;â€“&gt; é“¾ï¼ˆé’©å­ï¼‰ï¼š raw è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼šPREROUTINGï¼ŒOUTPUT mangle è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼šPREROUTINGï¼ŒINPUTï¼ŒFORWARDï¼ŒOUTPUTï¼ŒPOSTROUTING nat è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼šPREROUTINGï¼ŒINPUTï¼ŒOUTPUTï¼ŒPOSTROUTING filter è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼šINPUTï¼ŒFORWARDï¼ŒOUTPUT æˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œå› ä¸ºæ•°æ®åŒ…ç»è¿‡ä¸€ä¸ªâ€é“¾â€çš„æ—¶å€™ï¼Œä¼šå°†å½“å‰é“¾çš„æ‰€æœ‰è§„åˆ™éƒ½åŒ¹é…ä¸€éï¼Œä½†æ˜¯åŒ¹é…æ—¶æ€»å½’è¦æœ‰é¡ºåºï¼Œæˆ‘ä»¬åº”è¯¥ä¸€æ¡ä¸€æ¡çš„å»åŒ¹é…ï¼Œè€Œä¸”æˆ‘ä»¬è¯´è¿‡ï¼Œç›¸åŒåŠŸèƒ½ç±»å‹çš„è§„åˆ™ä¼šæ±‡èšåœ¨ä¸€å¼ â€è¡¨â€ä¸­ï¼Œé‚£ä¹ˆï¼Œå“ªäº›â€è¡¨â€ä¸­çš„è§„åˆ™ä¼šæ”¾åœ¨â€é“¾â€çš„æœ€å‰é¢æ‰§è¡Œå‘¢ï¼Œè¿™æ—¶å€™å°±éœ€è¦æœ‰ä¸€ä¸ªä¼˜å…ˆçº§çš„é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜æ‹¿preroutingâ€é“¾â€åšå›¾ç¤ºã€‚![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/27da89087e884fcc89185420e62de5a6.png#pic_center &#x3D;x400) preroutingé“¾ä¸­çš„è§„åˆ™å­˜æ”¾äºä¸‰å¼ è¡¨ä¸­ï¼Œè€Œè¿™ä¸‰å¼ è¡¨ä¸­çš„è§„åˆ™æ‰§è¡Œçš„ä¼˜å…ˆçº§å¦‚ä¸‹ï¼šraw â€“&gt; mangle â€“&gt; nat ä½†æ˜¯æˆ‘ä»¬çŸ¥é“ï¼Œiptablesä¸ºæˆ‘ä»¬å®šä¹‰äº†4å¼ â€è¡¨â€,å½“ä»–ä»¬å¤„äºåŒä¸€æ¡â€é“¾â€æ—¶ï¼Œæ‰§è¡Œçš„ä¼˜å…ˆçº§å¦‚ä¸‹ä¼˜å…ˆçº§æ¬¡åºï¼ˆç”±é«˜è€Œä½ï¼‰ï¼š raw â€“&gt; mangle â€“&gt; nat â€“&gt; filter æˆ‘ä»¬å‰é¢è¯´è¿‡ï¼ŒæŸäº›é“¾å¤©ç”Ÿå°±ä¸èƒ½ä½¿ç”¨æŸäº›è¡¨ä¸­çš„è§„åˆ™ï¼Œæ‰€ä»¥ï¼Œ4å¼ è¡¨ä¸­çš„è§„åˆ™å¤„äºåŒä¸€æ¡é“¾çš„ç›®å‰åªæœ‰outputé“¾ï¼Œå®ƒå°±æ˜¯ä¼ è¯´ä¸­æµ·é™†ç©ºéƒ½èƒ½é˜²å®ˆçš„å…³å¡ã€‚ æ•°æ®ç»è¿‡é˜²ç«å¢™çš„æµç¨‹ç»“åˆä¸Šè¿°æ‰€æœ‰çš„æè¿°ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•°æ®åŒ…é€šè¿‡é˜²ç«å¢™çš„æµç¨‹æ€»ç»“ä¸ºä¸‹å›¾ï¼šåœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿° æˆ‘ä»¬åœ¨å†™Iptablesè§„åˆ™çš„æ—¶å€™ï¼Œè¦æ—¶åˆ»ç‰¢è®°è¿™å¼ è·¯ç”±æ¬¡åºå›¾ï¼Œçµæ´»é…ç½®è§„åˆ™ã€‚ æˆ‘ä»¬å°†ç»å¸¸ç”¨åˆ°çš„å¯¹åº”å…³ç³»é‡æ–°å†™åœ¨æ­¤å¤„ï¼Œæ–¹ä¾¿å¯¹åº”å›¾ä¾‹æŸ¥çœ‹ã€‚é“¾çš„è§„åˆ™å­˜æ”¾äºå“ªäº›è¡¨ä¸­ï¼ˆä»é“¾åˆ°è¡¨çš„å¯¹åº”å…³ç³»ï¼‰ï¼š PREROUTING çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šrawè¡¨ã€mangleè¡¨ã€natè¡¨ã€‚ INPUT çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šmangleè¡¨ã€filterè¡¨ã€natè¡¨ã€‚ FORWARD çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šmangleè¡¨ã€filterè¡¨ã€‚ OUTPUT çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šrawè¡¨ã€mangleè¡¨ã€natè¡¨ã€filterè¡¨ã€‚ POSTROUTING çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šmangleè¡¨ã€natè¡¨ã€‚ è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼ˆä»è¡¨åˆ°é“¾çš„å¯¹åº”å…³ç³»ï¼‰ï¼š raw è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼šPREROUTINGï¼ŒOUTPUT mangle è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼šPREROUTINGï¼ŒINPUTï¼ŒFORWARDï¼ŒOUTPUTï¼ŒPOSTROUTING nat è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼šPREROUTINGï¼ŒINPUTï¼ŒOUTPUTï¼ŒPOSTROUTING filter è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼šINPUTï¼ŒFORWARDï¼ŒOUTPUT &nbsp; ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/a5077250afe74664a78aba3ef7a0e6fe.png#pic_center &#x3D;x400) è§„åˆ™çš„æ¦‚å¿µè§„åˆ™ï¼šæ ¹æ®æŒ‡å®šçš„åŒ¹é…æ¡ä»¶æ¥å°è¯•åŒ¹é…æ¯ä¸ªæµç»æ­¤å¤„çš„æŠ¥æ–‡ï¼Œä¸€æ—¦åŒ¹é…æˆåŠŸï¼Œåˆ™ç”±è§„åˆ™åé¢æŒ‡å®šçš„å¤„ç†åŠ¨ä½œè¿›è¡Œå¤„ç†ï¼› é‚£ä¹ˆæˆ‘ä»¬æ¥é€šä¿—çš„è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯iptablesçš„è§„åˆ™ï¼Œä¹‹å‰æ‰“è¿‡ä¸€ä¸ªæ¯”æ–¹ï¼Œæ¯æ¡â€é“¾â€éƒ½æ˜¯ä¸€ä¸ªâ€å…³å¡â€ï¼Œæ¯ä¸ªé€šè¿‡è¿™ä¸ªâ€å…³å¡â€çš„æŠ¥æ–‡éƒ½è¦åŒ¹é…è¿™ä¸ªå…³å¡ä¸Šçš„è§„åˆ™ï¼Œå¦‚æœåŒ¹é…ï¼Œåˆ™å¯¹æŠ¥æ–‡è¿›è¡Œå¯¹åº”çš„å¤„ç†ï¼Œæ¯”å¦‚è¯´ï¼Œä½ æˆ‘äºŒäººæ­¤åˆ»å°±å¥½åƒä¸¤ä¸ªâ€æŠ¥æ–‡â€ï¼Œä½ æˆ‘äºŒäººæ­¤åˆ»éƒ½è¦å…¥å…³ï¼Œå¯æ˜¯åŸä¸»æœ‰å‘½ï¼Œåªæœ‰å™¨å®‡è½©æ˜‚çš„äººæ‰èƒ½å…¥å…³ï¼Œä¸ç¬¦åˆæ­¤æ¡ä»¶çš„äººä¸èƒ½å…¥å…³ï¼Œäºæ˜¯å®ˆå…³å°†å£«æŒ‰ç…§åŸä¸»åˆ¶å®šçš„â€è§„åˆ™â€ï¼Œå¼€å§‹æ‰“é‡ä½ æˆ‘äºŒäººï¼Œæœ€ç»ˆï¼Œä½ é¡ºåˆ©å…¥å…³äº†ï¼Œè€Œæˆ‘å·²è¢«æ‹’ä¹‹é—¨å¤–ï¼Œå› ä¸ºä½ ç¬¦åˆâ€å™¨å®‡è½©æ˜‚â€çš„æ ‡å‡†ï¼Œæ‰€ä»¥æŠŠä½ â€æ”¾è¡Œâ€äº†ï¼Œè€Œæˆ‘ä¸ç¬¦åˆæ ‡å‡†ï¼Œæ‰€ä»¥æ²¡æœ‰è¢«æ”¾è¡Œï¼Œå…¶å®ï¼Œâ€å™¨å®‡è½©æ˜‚â€å°±æ˜¯ä¸€ç§â€åŒ¹é…æ¡ä»¶â€ï¼Œâ€æ”¾è¡Œâ€å°±æ˜¯ä¸€ç§â€åŠ¨ä½œâ€ï¼Œâ€åŒ¹é…æ¡ä»¶â€ä¸â€åŠ¨ä½œâ€ç»„æˆäº†è§„åˆ™ã€‚ è§„åˆ™ç”± åŒ¹é…æ¡ä»¶ å’Œ å¤„ç†åŠ¨ä½œ ç»„æˆåŒ¹é…æ¡ä»¶åŒ¹é…æ¡ä»¶åˆ†ä¸ºåŸºæœ¬åŒ¹é…æ¡ä»¶ä¸æ‰©å±•åŒ¹é…æ¡ä»¶ åŸºæœ¬åŒ¹é…æ¡ä»¶ï¼šæºåœ°å€Source IPï¼Œç›®æ ‡åœ°å€ Destination IP ä¸Šè¿°å†…å®¹éƒ½å¯ä»¥ä½œä¸ºåŸºæœ¬åŒ¹é…æ¡ä»¶ã€‚ æ‰©å±•åŒ¹é…æ¡ä»¶ï¼šé™¤äº†ä¸Šè¿°çš„æ¡ä»¶å¯ä»¥ç”¨äºåŒ¹é…ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„æ¡ä»¶å¯ä»¥ç”¨äºåŒ¹é…ï¼Œè¿™äº›æ¡ä»¶æ³›ç§°ä¸ºæ‰©å±•æ¡ä»¶ï¼Œè¿™äº›æ‰©å±•æ¡ä»¶å…¶å®ä¹Ÿæ˜¯netfilterä¸­çš„ä¸€éƒ¨åˆ†ï¼Œåªæ˜¯ä»¥æ¨¡å—çš„å½¢å¼å­˜åœ¨ï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨è¿™äº›æ¡ä»¶ï¼Œåˆ™éœ€è¦ä¾èµ–å¯¹åº”çš„æ‰©å±•æ¨¡å—ã€‚ æºç«¯å£Source Port, ç›®æ ‡ç«¯å£Destination Port ä¸Šè¿°å†…å®¹éƒ½å¯ä»¥ä½œä¸ºæ‰©å±•åŒ¹é…æ¡ä»¶ å¤„ç†åŠ¨ä½œä¸€äº›å¸¸ç”¨çš„åŠ¨ä½œï¼š ACCEPTï¼šå…è®¸æ•°æ®åŒ…é€šè¿‡ã€‚ DROPï¼šç›´æ¥ä¸¢å¼ƒæ•°æ®åŒ…ï¼Œä¸ç»™ä»»ä½•å›åº”ä¿¡æ¯ï¼Œè¿™æ—¶å€™å®¢æˆ·ç«¯ä¼šæ„Ÿè§‰è‡ªå·±çš„è¯·æ±‚æ³¥ç‰›å…¥æµ·äº†ï¼Œè¿‡äº†è¶…æ—¶æ—¶é—´æ‰ä¼šæœ‰ååº”ã€‚ REJECTï¼šæ‹’ç»æ•°æ®åŒ…é€šè¿‡ï¼Œå¿…è¦æ—¶ä¼šç»™æ•°æ®å‘é€ç«¯ä¸€ä¸ªå“åº”çš„ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯åˆšè¯·æ±‚å°±ä¼šæ”¶åˆ°æ‹’ç»çš„ä¿¡æ¯ã€‚ SNATï¼šæºåœ°å€è½¬æ¢ï¼Œè§£å†³å†…ç½‘ç”¨æˆ·ç”¨åŒä¸€ä¸ªå…¬ç½‘åœ°å€ä¸Šç½‘çš„é—®é¢˜ã€‚ MASQUERADEï¼šæ˜¯SNATçš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œé€‚ç”¨äºåŠ¨æ€çš„ã€ä¸´æ—¶ä¼šå˜çš„ipä¸Šã€‚ DNATï¼šç›®æ ‡åœ°å€è½¬æ¢ã€‚ REDIRECTï¼šåœ¨æœ¬æœºåšç«¯å£æ˜ å°„ã€‚ LOGï¼šåœ¨&#x2F;var&#x2F;log&#x2F;messagesæ–‡ä»¶ä¸­è®°å½•æ—¥å¿—ä¿¡æ¯ï¼Œç„¶åå°†æ•°æ®åŒ…ä¼ é€’ç»™ä¸‹ä¸€æ¡è§„åˆ™ï¼Œä¹Ÿå°±æ˜¯è¯´é™¤äº†è®°å½•ä»¥å¤–ä¸å¯¹æ•°æ®åŒ…åšä»»ä½•å…¶ä»–æ“ä½œï¼Œä»ç„¶è®©ä¸‹ä¸€æ¡è§„åˆ™å»åŒ¹é…ã€‚ â˜…,Â°:.â˜†(ï¿£â–½ï¿£)&#x2F;$:.Â°â˜… ã€‚","categories":[{"name":"æŠ€æœ¯åˆ†æ","slug":"æŠ€æœ¯åˆ†æ","permalink":"https://jiang07shuai06.github.io/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E6%9E%90/"}],"tags":[{"name":"iptables","slug":"iptables","permalink":"https://jiang07shuai06.github.io/tags/iptables/"}],"author":"byte76"},{"title":"HTTPåŸºç¡€æ¦‚å¿µ","slug":"HTTP","date":"2024-12-24T02:37:22.519Z","updated":"2024-12-24T12:30:31.672Z","comments":true,"path":"2024/12/24/HTTP/","permalink":"https://jiang07shuai06.github.io/2024/12/24/HTTP/","excerpt":"","text":"HTTPè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTPï¼‰æ˜¯ä¸€ä¸ªç”¨äºä¼ è¾“è¶…åª’ä½“æ–‡æ¡£ï¼ˆä¾‹å¦‚HTMLï¼‰çš„åº”ç”¨å±‚åè®®ã€‚å®ƒæ˜¯ä¸ºäº†Webæµè§ˆå™¨ä¸WebæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡è€Œè®¾è®¡çš„ï¼Œä½†ä¹Ÿå¯ä»¥ç”¨äºå…¶ä»–ç›®çš„ï¼ˆä¾‹å¦‚APIé€šä¿¡ï¼‰ã€‚HTTPæ˜¯æ— çŠ¶æ€åè®®ï¼Œè¿™æ„å‘³ç€æœåŠ¡å™¨ä¸ä¼šåœ¨ä¸¤ä¸ªè¯·æ±‚ä¹‹é—´ä¿ç•™ä»»ä½•æ•°æ®ï¼ˆçŠ¶æ€ï¼‰ã€‚ ä»€ä¹ˆæ˜¯HTTPè¯·æ±‚ï¼ŸHTTPè¯·æ±‚æ˜¯å®¢æˆ·ç«¯ï¼ˆæ¯”å¦‚æµè§ˆå™¨ï¼‰å‘æœåŠ¡å™¨è¯·æ±‚è·å–èµ„æºï¼ˆå¦‚ç½‘é¡µã€å›¾ç‰‡ã€æ–‡ä»¶ç­‰ï¼‰æ—¶å‘é€çš„æ¶ˆæ¯ã€‚åŒ…å«å¦‚ä¸‹å‡ ä¸ªå…³é”®éƒ¨åˆ†ï¼š è¯·æ±‚è¡Œï¼šåŒ…å«è¯·æ±‚æ–¹æ³•ï¼ˆå¦‚ GET ç”¨äºè·å–èµ„æºã€POSTç”¨äºæäº¤æ•°æ®ï¼‰ã€è¯·æ±‚çš„ URLï¼ˆç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ŒæŒ‡å®šè¦è®¿é—®çš„èµ„æºä½ç½®ï¼‰å’Œ HTTP åè®®ç‰ˆæœ¬ã€‚ è¯·æ±‚å¤´ï¼šåŒ…å«ä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼Œåƒç”¨æˆ·ä»£ç†ï¼ˆè¡¨æ˜è¯·æ±‚çš„å®¢æˆ·ç«¯ç±»å‹ï¼‰ã€æ¥å—çš„å†…å®¹ç±»å‹ï¼ˆå¦‚æ¥å— HTMLã€JSON ç­‰ï¼‰ã€ç¼“å­˜æ§åˆ¶ä¿¡æ¯ç­‰ï¼Œç”¨äºå‘Šè¯‰æœåŠ¡å™¨æ›´å¤šå…³äºè¯·æ±‚çš„ç»†èŠ‚ã€‚ è¯·æ±‚ä½“ï¼ˆå¯é€‰ï¼‰ï¼šä¸»è¦ç”¨äº POST ç­‰è¯·æ±‚æ–¹æ³•ï¼Œåœ¨å…¶ä¸­æ”¾ç½®è¦å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®ï¼Œä¾‹å¦‚è¡¨å•æ•°æ®ã€‚ é¦–å…ˆè¦æ˜ç¡®ï¼Œä¸æ˜¯æ‰€æœ‰çš„ HTTP è¯·æ±‚æ–¹æ³•éƒ½ä½¿ç”¨è¯·æ±‚ä½“ã€‚æœ€å¸¸ç”¨äºå‘é€è¯·æ±‚ä½“çš„æ–¹æ³•æ˜¯ POST å’Œ PUTã€‚ POST æ–¹æ³•é€šå¸¸ç”¨äºå‘æœåŠ¡å™¨æäº¤æ•°æ®æ¥åˆ›å»ºæ–°çš„èµ„æºã€‚ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·åœ¨ç½‘é¡µä¸Šå¡«å†™ä¸€ä¸ªæ³¨å†Œè¡¨å•å¹¶æäº¤æ—¶ï¼Œæµè§ˆå™¨ä¼šä½¿ç”¨ POST æ–¹æ³•å°†è¡¨å•æ•°æ®å‘é€åˆ°æœåŠ¡å™¨çš„æ³¨å†Œæ¥å£ã€‚ PUT æ–¹æ³•ä¸»è¦ç”¨äºæ›´æ–°æœåŠ¡å™¨ä¸Šå·²æœ‰çš„èµ„æºã€‚å‡è®¾ä¸€ä¸ªåœ¨çº¿æ–‡æ¡£ç¼–è¾‘åº”ç”¨ï¼Œç”¨æˆ·ä¿®æ”¹äº†æ–‡æ¡£å†…å®¹åï¼Œç‚¹å‡»ä¿å­˜ï¼Œåº”ç”¨å¯èƒ½ä¼šä½¿ç”¨ PUT æ–¹æ³•å°†æ›´æ–°åçš„æ–‡æ¡£å†…å®¹å‘é€åˆ°æœåŠ¡å™¨æ¥æ›´æ–°æ–‡æ¡£èµ„æºã€‚ httpè¯·æ±‚æ–¹æ³•åœ¨ HTTP é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ª HTTPè¯·æ±‚æŠ¥æ–‡ä¸­éƒ½ä¼šåŒ…å«ä¸€ä¸ª HTTPè¯·æ±‚æ–¹æ³•ï¼Œç”¨äºå‘ŠçŸ¥å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯è¯·æ±‚æ‰§è¡ŒæŸäº›å…·ä½“çš„æ“ä½œï¼Œä¸‹é¢åˆ—ä¸¾å‡ é¡¹å¸¸ç”¨çš„ HTTPè¯·æ±‚æ–¹æ³• HTTP è¯·æ±‚æ–¹æ³• æè¿° GET ç”¨äºå®¢æˆ·ç«¯è¯·æ±‚æŒ‡å®šèµ„æºä¿¡æ¯ï¼Œå¹¶è¿”å›æŒ‡å®šèµ„æºå®ä½“ HEAD å’Œ GET ç›¸ä¼¼ï¼Œä½†å…¶ä¸éœ€è¦æœåŠ¡å™¨å“åº”è¯·æ±‚çš„èµ„æºï¼Œè€Œè¿”å›å“åº”é¦–éƒ¨ï¼ˆåªéœ€è¦å“åº”é¦–éƒ¨å³å¯ï¼Œå°±æ˜¯å‘Šè¯‰æˆ‘æœ‰æˆ–è€…æ²¡æœ‰ï¼Œä¸éœ€è¦ç¼“å­˜ç•Œé¢ç»™æˆ‘ï¼‰ POST åŸºäºHTMLè¡¨å•å‘æœåŠ¡å™¨æäº¤æ•°æ®ï¼ŒæœåŠ¡iå»é€šå¸¸éœ€è¦å­˜å‚¨æ­¤æ•°æ®ï¼Œé€šå¸¸å­˜æ”¾åœ¨ MySQL è¿™ç§å…³ç³»å‹æ•°æ®åº“ä¸­ PUT ä¸ GET ç›¸åï¼Œæ˜¯å‘æœåŠ¡å™¨å‘é€èµ„æºçš„ï¼ŒæœåŠ¡å™¨é€šå¸¸éœ€è¦å­˜å‚¨æ¬¡èµ„æºï¼Œè¿™å°±å¥½æ¯”ä½ è¦æŠŠä¸€ä¸ªæ–°çš„å•†å“é€åˆ°å•†åº—å¹¶è®©å•†åº—å­˜å‚¨èµ·æ¥ã€‚ DELETE è¯·æ±‚æœåŠ¡å™¨ç«¯åˆ é™¤URLæŒ‡å®šçš„èµ„æº MOVE è¯·æ±‚æœåŠ¡å™¨å°†æŒ‡å®šçš„é¡µé¢ç§»è‡³å¦ä¸€ä¸ªç½‘ç»œåœ°å€ OPTIONS æ¢æµ‹æœåŠ¡å™¨ç«¯å¯¹è¯·æ±‚çš„URLæ‰€æ”¯æŒä½¿ç”¨çš„è¯·æ±‚æ–¹æ³• TRACE è·Ÿè¸ªä¸€æ¬¡è¯·æ±‚ä¸­é—´æ‰€ç»å†çš„ä»£ç†æœåŠ¡å™¨ã€é˜²ç«å¢™æˆ–ç½‘å…³ç­‰ã€‚ä¸»è¦ç”¨äºè°ƒè¯•ã€‚ æ‰©å±•ï¼šæ¨èä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„çš„ APIå¼€å‘å’Œæµ‹è¯•å·¥å…·â€”â€” postman httpåè®®ç‰ˆæœ¬http 0.9ï¼šæœ€åˆçš„ç‰ˆæœ¬ï¼Œä»…æ”¯æŒ GET æ–¹æ³•ï¼Œä¸»è¦ç”¨äºè·å– HTML æ–‡æ¡£ï¼Œæ²¡æœ‰å…¶ä»–çš„æ¦‚å¿µï¼Œå“åº”ä¹Ÿå¾ˆç®€å•ï¼Œåªä¼šè¿”å› HTML æ–‡æ¡£å†…å®¹ï¼Œæ²¡æœ‰çŠ¶æ€ç ã€å“åº”å¤´è¿™äº›å†…å®¹ã€‚ http 1.0ï¼šç›¸è¾ƒäº0.9ç‰ˆæœ¬æ–°å¢äº†å¤šç§è¯·æ±‚æ–¹æ³•ï¼Œå¦‚ POSTã€HEADç­‰ã€‚å¼•å…¥äº†è¯·æ±‚å¤´å’Œå“åº”å¤´ï¼Œç”¨äºä¼ é€’å…³äºè¯·æ±‚å’Œå“åº”çš„æ›´å¤šä¿¡æ¯ï¼›ä¾‹å¦‚ï¼Œé€šè¿‡è¯·æ±‚å¤´ä¸­çš„ â€œAcceptâ€ å­—æ®µï¼Œå®¢æˆ·ç«¯å¯ä»¥å‘Šè¯‰æœåŠ¡å™¨å®ƒèƒ½å¤Ÿæ¥å—çš„å†…å®¹ç±»å‹ï¼›å“åº”å¤´ä¸­çš„ â€œContent - Typeâ€ å­—æ®µåˆ™å‘ŠçŸ¥å®¢æˆ·ç«¯è¿”å›å†…å®¹çš„ç±»å‹ã€‚æ”¯æŒå¤šç§å†…å®¹ç±»å‹ï¼ŒåŒ…æ‹¬æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç­‰å¤šç§æ ¼å¼çš„æ–‡ä»¶ä¼ è¾“ã€‚ http 1.1ï¼š ç›®å‰å¹¿æ³›ä½¿ç”¨çš„ç‰ˆæœ¬ä¹‹ä¸€ï¼Œåœ¨1.0ç‰ˆæœ¬ä¸­ï¼Œæ¯æ¬¡è¯·æ±‚&#x2F;å“åº”å®Œæˆåï¼Œè¿æ¥å°±ä¼šå…³é—­ã€‚è€Œ1.1ç‰ˆæœ¬ä¸­å…è®¸åœ¨ä¸€æ¬¡ TCP è¿æ¥ä¸­è¿›è¡Œå¤šæ¬¡è¯·æ±‚&#x2F;å“åº”ï¼Œå‡å°‘äº†å»ºç«‹å’Œå…³é—­è¿æ¥çš„å¼€é”€ï¼Œæé«˜äº†ç½‘ç»œä¼ è¾“æ•ˆç‡ã€‚æ–°å¢äº†æ›´å¤šçš„è¯·æ±‚æ–¹æ³•ï¼Œå¦‚ PUTã€DELETE ç­‰ã€‚å¼•å…¥äº†ç®¡é“åŒ–æŠ€æœ¯ï¼Œå…è®¸å®¢æˆ·ç«¯åœ¨ç­‰å¾…ä¸€ä¸ªè¯·æ±‚çš„å“åº”æ—¶å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚ä¸è¿‡ï¼Œç®¡é“åŒ–åœ¨å®é™…åº”ç”¨ä¸­å› ä¸ºä¸€äº›å¤æ‚çš„åŸå› ï¼ˆå¦‚è¯·æ±‚é¡ºåºä¾èµ–ç­‰ï¼‰æ²¡æœ‰å¾—åˆ°å¹¿æ³›ä½¿ç”¨ã€‚ http 2.0ï¼šé‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œç›¸æ¯”äº1.1ç‰ˆæœ¬çš„æ–‡æœ¬æ ¼å¼ï¼ŒäºŒè¿›åˆ¶æ ¼å¼æ›´é«˜æ•ˆï¼Œè§£æé€Ÿåº¦æ›´å¿«ã€‚æ”¯æŒå¤´éƒ¨å‹ç¼©ï¼Œé€šè¿‡é€šè¿‡ HPB ç®—æ³•å‹ç¼©å¤´éƒ¨ï¼Œå‡å°‘ä¼ è¾“é‡ã€‚å¤šè·¯å¤ç”¨æ˜¯2.0ç‰ˆæœ¬çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒå…è®¸åœ¨ä¸€ä¸ª TCP è¿æ¥ä¸ŠåŒæ—¶ä¼ è¾“å¤šä¸ªè¯·æ±‚å’Œå“åº”ï¼Œè¿™äº›è¯·æ±‚å’Œå“åº”å¯ä»¥äº¤é”™è¿›è¡Œï¼Œè€Œä¸éœ€è¦åƒ1.1ç‰ˆæœ¬é‚£æ ·æ’é˜Ÿç­‰å¾…ã€‚ ä»€ä¹ˆæ˜¯ HTTP å“åº”ï¼ŸHTTP å“åº”æ˜¯æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯ HTTP è¯·æ±‚çš„å›å¤æ¶ˆæ¯ã€‚å½“å®¢æˆ·ç«¯ï¼ˆå¦‚æµè§ˆå™¨ï¼‰å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè¯·æ±‚è·å–ç½‘é¡µã€æ–‡ä»¶æˆ–æ‰§è¡ŒæŸç§æ“ä½œåï¼ŒæœåŠ¡å™¨ä¼šå¤„ç†è¯¥è¯·æ±‚ï¼Œå¹¶è¿”å›ä¸€ä¸ª HTTP å“åº”æ¥å‘ŠçŸ¥å®¢æˆ·ç«¯è¯·æ±‚çš„ç»“æœã€‚ç»„æˆéƒ¨åˆ†ï¼šçŠ¶æ€ç ï¼šè¿™æ˜¯ HTTP å“åº”ä¸­éå¸¸å…³é”®çš„éƒ¨åˆ†ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸‰ä½æ•°å­—çš„ä»£ç ï¼Œç”¨äºè¡¨ç¤ºæœåŠ¡å™¨å¯¹è¯·æ±‚çš„å¤„ç†çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œæœ€å¸¸è§çš„çŠ¶æ€ç  200ï¼Œè¡¨ç¤ºè¯·æ±‚æˆåŠŸï¼ŒæœåŠ¡å™¨å·²æˆåŠŸå¤„ç†å¹¶è¿”å›è¯·æ±‚çš„èµ„æºã€‚è€Œ 404 çŠ¶æ€ç åˆ™è¡¨ç¤ºè¯·æ±‚çš„èµ„æºæœªæ‰¾åˆ°ï¼Œå¯èƒ½æ˜¯å®¢æˆ·ç«¯è¯·æ±‚çš„ URL æœ‰è¯¯æˆ–è€…æœåŠ¡å™¨ä¸Šä¸å­˜åœ¨è¯¥èµ„æºã€‚å¦å¤–è¿˜æœ‰ 500 çŠ¶æ€ç ï¼Œé€šå¸¸æ„å‘³ç€æœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿäº†å†…éƒ¨é”™è¯¯ã€‚ å“åº”å¤´ï¼šå“åº”å¤´åŒ…å«äº†å…³äºå“åº”çš„å„ç§é™„åŠ ä¿¡æ¯ã€‚æ¯”å¦‚ â€œContent - Typeâ€ å­—æ®µï¼Œå®ƒå‘Šè¯‰å®¢æˆ·ç«¯è¿”å›å†…å®¹çš„ç±»å‹ï¼Œå¦‚ â€œtext&#x2F;htmlâ€ è¡¨ç¤ºè¿”å›çš„æ˜¯ HTML æ–‡æ¡£ï¼Œâ€œapplication&#x2F;jsonâ€ è¡¨ç¤ºè¿”å›çš„æ˜¯ JSON æ ¼å¼çš„æ•°æ®ã€‚è¿˜æœ‰ â€œContent - Lengthâ€ å­—æ®µï¼Œç”¨äºæŒ‡ç¤ºå“åº”ä½“çš„é•¿åº¦ï¼ˆå­—èŠ‚æ•°ï¼‰ã€‚æ­¤å¤–ï¼Œå“åº”å¤´è¿˜å¯èƒ½åŒ…å«ç¼“å­˜æ§åˆ¶ä¿¡æ¯ï¼ˆå¦‚ â€œCache - Controlâ€ï¼‰ï¼Œç”¨äºæŒ‡å¯¼å®¢æˆ·ç«¯æ˜¯å¦ç¼“å­˜ä»¥åŠå¦‚ä½•ç¼“å­˜å“åº”å†…å®¹ã€‚ å“åº”ä½“ï¼šå“åº”ä½“æ˜¯æœåŠ¡å™¨è¿”å›çš„å®é™…å†…å®¹ï¼Œæ˜¯å®¢æˆ·ç«¯çœŸæ­£éœ€è¦çš„éƒ¨åˆ†ã€‚å¦‚æœå®¢æˆ·ç«¯è¯·æ±‚çš„æ˜¯ä¸€ä¸ªç½‘é¡µï¼Œé‚£ä¹ˆå“åº”ä½“å°±æ˜¯ç½‘é¡µçš„ HTML ä»£ç ï¼›å¦‚æœè¯·æ±‚çš„æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œå“åº”ä½“å°±æ˜¯å›¾ç‰‡çš„äºŒè¿›åˆ¶æ•°æ®ï¼›è‹¥è¯·æ±‚çš„æ˜¯ä¸€ä¸ª API æ¥å£è·å–æ•°æ®ï¼Œå“åº”ä½“å¯èƒ½æ˜¯ JSON æˆ– XML æ ¼å¼çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®åŒ…å«äº†å®¢æˆ·ç«¯æ‰€è¯·æ±‚çš„ä¿¡æ¯ã€‚ httpçš„çŠ¶æ€ç  çŠ¶æ€ç  è¯´æ˜ 1XX ä¿¡æ¯æ€§çŠ¶æ€ç  2XX æˆåŠŸçŠ¶æ€ç  3XX é‡å®šå‘çŠ¶æ€ç  4XX å®¢æˆ·ç«¯é”™è¯¯ 5XX æœåŠ¡ç«¯é”™è¯¯ Webå®¢æˆ·ç«¯è®¿é—®WebæœåŠ¡å™¨çš„å·¥ä½œæµç¨‹ï¼ˆä»¥ç½‘ç»œæµè§ˆå™¨ä¸ºä¾‹ï¼‰å¯¼èˆªå’Œå¯åŠ¨ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€æˆ–è€…ç‚¹å‡»å…¶ä»–é€šä¿¡ä¸­çš„é“¾æ¥åï¼Œæµè§ˆå™¨é€šè¿‡ DNS æŸ¥æ‰¾ç½‘å€å¹¶å°†è¯·æ±‚å‘é€åˆ°è¯¥ç½‘å€ å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ HTTP è¯·æ±‚æŠ¥æ–‡å®¢æˆ·ç«¯ï¼ˆå¦‚æµè§ˆå™¨ï¼‰æ„å»ºä¸€ä¸ªè¯·æ±‚æŠ¥æ–‡å‘é€ç»™ Web æœåŠ¡å™¨ï¼Œè¯·æ±‚æŠ¥æ–‡çš„ç¬¬ä¸€è¡Œæ ‡è¯†äº†ç½‘ç«™çš„æ ¹é¡µé¢ï¼ŒæŒ‡ç¤ºäº†HTTPçš„ç‰ˆæœ¬ï¼ˆ1.1&#x2F;1.0&#x2F;â€¦ï¼‰ï¼Œè¿˜æœ‰è¯·æ±‚å®ä½“ï¼ˆå¦‚æµè§ˆå™¨ï¼‰çš„ä¿¡æ¯ã€‚è¯·æ±‚æŠ¥æ–‡å‘é€åˆ°WebæœåŠ¡å™¨åï¼Œå³å¯ç”±æœåŠ¡å™¨è¯»å–å¹¶ç”Ÿæˆå“åº”ã€‚ æœåŠ¡å™¨å°† HTTP å“åº”å‘å›ç»™å®¢æˆ·ç«¯WebæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œå°±ä¼šç”Ÿæˆå“åº”æŠ¥æ–‡å¹¶å°†å…¶è¿”å›ç»™æµè§ˆå™¨ï¼ˆå®¢æˆ·ç«¯ï¼‰ï¼Œæµè§ˆå™¨æ¥æ”¶å¹¶è¯»å–å“åº”æŠ¥æ–‡ã€‚æŠ¥æ–‡çš„ç¬¬ä¸€è¡Œé€šå¸¸æ˜¯å“åº”ä»£ç å¦‚ â€œ200 OKâ€ï¼Œè¡¨ç¤º WebæœåŠ¡å™¨å¯ä»¥æˆåŠŸå“åº”è¯·æ±‚ã€‚HTTPå“åº”æŠ¥æ–‡ç¡®åˆ‡å†ç°äº†è¯·æ±‚æŠ¥æ–‡çš„æ ¼å¼ï¼Œå¹¶åŒ…å«ä¸€ç³»åˆ—æˆä¸ºâ€œå“åº”æ ‡å¤´â€çš„è¡Œï¼Œè¿™äº›è¡Œæä¾›æœ‰å…³å“åº”çš„ä¿¡æ¯ã€‚ æµè§ˆå™¨å‘ˆç°æŠ¥æ–‡æµè§ˆå™¨å‘ˆç°å“åº”æŠ¥æ–‡ï¼Œå¹¶åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºç½‘é¡µ è¡¡é‡ä¸€ä¸ª webç½‘å€çš„è®¿é—®é‡æŒ‡æ ‡ï¼špvã€uvã€ippvï¼šç½‘ç«™çš„ç‚¹å‡»é‡uvï¼šç½‘ç«™çš„è®¿é—®ç”¨æˆ·æ•°â€”â€”COOKIEï¼Œcookieå€¼ç›¸åŒçš„è¡¨ç¤ºæ˜¯ä¸€ä¸ªç”¨æˆ·ipï¼šç½‘ç«™çš„è®¿é—®ipæ•°ï¼Œå³æœ‰å¤šå°‘å°å®¢æˆ·æœºè®¿é—®","categories":[{"name":"æŠ€æœ¯åˆ†äº«","slug":"æŠ€æœ¯åˆ†äº«","permalink":"https://jiang07shuai06.github.io/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"}],"tags":[{"name":"ç½‘ç»œåè®®","slug":"ç½‘ç»œåè®®","permalink":"https://jiang07shuai06.github.io/tags/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/"}],"author":"byte76"},{"title":"Hexo+Github==>ä¸ªäººåšå®¢","slug":"Hexo-Github-ä¸ªäººåšå®¢","date":"2024-10-20T08:17:35.000Z","updated":"2024-12-29T03:34:58.470Z","comments":true,"path":"2024/10/20/Hexo-Github-ä¸ªäººåšå®¢/","permalink":"https://jiang07shuai06.github.io/2024/10/20/Hexo-Github-%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/","excerpt":"","text":"è¿™ç¯‡æ–‡ç« æ˜¯å¯¹äºä½¿ç”¨ hexo å’Œ github æ­å»ºä¸ªäººåšå®¢çš„æ€è·¯æ¢³ç†1ã€ä¸‹è½½ node.jshttps://nodejs.org/zh-cn 2ã€ä¸‹è½½ githttps://git-scm.com/downloads éªŒè¯æ˜¯å¦ä¸‹è½½æˆåŠŸï¼Œç®¡ç†å‘˜è¿è¡Œ cmd è¾“å…¥ä»¥ä¸‹ä¸‰æ¡å‘½ä»¤ 123node -vnpm -vgit -v 3ã€ä¸‹è½½ hexo1npm install hexo-cli -g 4ã€æ­å»ºä»“åº“åç§°æ ¼å¼ï¼šä»“åº“åç§°.github.io å‹¾é€‰ Public å‹¾é€‰ Add a README file æ‹‰åˆ°ä¸‹é¢ç‚¹å‡» create åˆ›å»º 5ã€ç”ŸæˆSSH Keysè¿›å…¥ä»»æ„æ–‡ä»¶å¤¹ï¼Œå³é”®ç©ºç™½å¤„ç„¶åç‚¹Git bash here,è¾“å…¥ 1ssh-keygen -t rsa -C &quot;é‚®ä»¶åœ°å€&quot; ç„¶åæ•²4æ¬¡EnterâŒ¨ï¸ç„¶åè¿›å…¥C:\\Users\\ç”¨æˆ·åï¼Œåœ¨é‡Œé¢è¿›å…¥.sshæ–‡ä»¶ç”¨è®°äº‹æœ¬æ‰“å¼€é‡Œé¢çš„id_rsa.pub,å…¨é€‰å¤åˆ¶é‡Œé¢çš„ä»£ç ç„¶åæ‰“å¼€githubè¿›å…¥ç”¨æˆ·è®¾ç½®ï¼Œæ‰¾åˆ°SSH keysæ–°å»ºSSH keysï¼Œåç§°éšæ„ï¼Œåœ¨ä¸‹é¢ç²˜è´´ä»£ç ï¼Œç„¶ååˆ›å»ºæµ‹è¯•æ˜¯å¦æˆåŠŸåœ¨git bashä¸­è¾“å…¥ 1ssh -T git@github.com å›è½¦ï¼Œç„¶åå†è¾“å…¥ yes 6ã€æœ¬åœ°éƒ¨ç½²åœ¨å–œæ¬¢ä½ç½®æ–°å»ºæ–‡ä»¶Blogï¼Œç„¶åè¿›å…¥æ–‡ä»¶å¤¹å³é”®ç©ºç™½å¤„ç„¶åç‚¹ Git bash hereï¼Œè¾“å…¥ 1hexo init ç„¶åä¾æ¬¡è¾“å…¥ 12hexo g # ç”Ÿæˆhexo s # é¢„è§ˆ ï¼ˆå¦‚æœä¸æˆåŠŸçš„è¯å°±é‡å¤ç›´åˆ°æˆåŠŸï¼Œå› ä¸ºå›½å†…ä¸githubè¿æ¥ä¸ç¨³å®šï¼‰ç°åœ¨å°±å¯ä»¥å¤åˆ¶ç”Ÿæˆçš„é“¾æ¥è¿›å…¥æµè§ˆå™¨çœ‹åˆ°æˆ‘ä»¬ç”Ÿæˆçš„æœ¬åœ°æœåŠ¡å™¨äº†ç„¶åå›åˆ°å‘½ä»¤è¡Œï¼Œctrl+c å…³é—­ 7ã€ä¸Šçº¿åšå®¢è¿›å…¥ä¹‹å‰çš„Blogæ–‡ä»¶å¤¹ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€_config.ymlç¼–è¾‘ url æ®µè½ 123# URL## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;url: https://Jiang07Shuai06.github.io æ‹‰åˆ°æœ€ä¸‹é¢å°†deployåé¢çš„å…¨åˆ æ‰ï¼Œå¤åˆ¶ç²˜è´´è¿™æ®µ 123type: gitrepository: branch: main æ³¨æ„ç¼©è¿›æ ¼å¼ï¼šæ¯è¡Œå‰é¢éƒ½æœ‰ä¸¤ä¸ªç©ºæ ¼ä¸è¦åˆ ï¼Œæ¯ä¸ªå†’å·åé¢éƒ½æœ‰ä¸ªç©ºæ ¼ä¹Ÿä¸è¦åˆ ï¼å» github ä¹‹å‰ç”Ÿæˆçš„ä»“åº“é¡µé¢ï¼Œç‚¹ codeï¼Œå¤åˆ¶ httpsé“¾æ¥å°†å…¶ç²˜è´´åˆ°æˆ‘ä»¬è®°äº‹æœ¬ä¸­çš„ repositoryï¼šåé¢ç„¶åä¿å­˜é€€å‡ºå›åˆ°åšå®¢æ–‡ä»¶å¤¹ï¼Œgit bashå®‰è£…è‡ªåŠ¨éƒ¨ç½²å‘å¸ƒå·¥å…· 1npm install hexo-deployer-git --save ç„¶ååœ¨Blogæ–‡ä»¶å¤¹å³é”®æ‰“å¼€git bashï¼Œä¾æ¬¡è¾“å…¥ 12hexo g # ç”Ÿæˆhexo d # ä¸Šä¼  å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨gitçš„è¯ä¼šéœ€è¦é…ç½®git config --global user.email &quot;ä½ çš„é‚®ç®±&quot;git config --global user.name &quot;ä½ çš„åå­—&quot;é…ç½®å®Œåå† hexo d ä¸Šä¼ åœ¨è·³å‡ºæ¥çš„çª—å£å†…è¿›è¡Œç™»å½•æ¥ä¸‹æ¥æˆ‘ä»¬å°±æˆåŠŸæŠŠæœ¬åœ°å†…å®¹ä¸Šä¼ åˆ°githubäº†ä¸Šä¼ æˆåŠŸä»¥åï¼Œæˆ‘ä»¬å°±ç®—æ­å»ºå¥½äº†ï¼ä¸Šè‡ªå·±çš„ç½‘å€çœ‹çœ‹å§ç½‘å€æ˜¯æˆ‘ä»¬ä¹‹å‰è®¾çš„ä»“åº“åï¼šç”¨æˆ·å.github.io æ–‡ç« å‚è€ƒğŸ”—ï¼šhttps://blog.fiveth.cc/p/bb32/#%E5%87%86%E5%A4%87%E5%B7%A5%E5%85%B7","categories":[{"name":"æŠ€æœ¯åˆ†äº«","slug":"æŠ€æœ¯åˆ†äº«","permalink":"https://jiang07shuai06.github.io/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"}],"tags":[{"name":"åšå®¢","slug":"åšå®¢","permalink":"https://jiang07shuai06.github.io/tags/%E5%8D%9A%E5%AE%A2/"}]},{"title":"å¤©æ°”é¢„æŠ¥è‡ªåŠ¨æ¨é€","slug":"å¤©æ°”é¢„æŠ¥æ¨é€","date":"2024-10-07T09:29:17.000Z","updated":"2024-10-26T02:34:44.175Z","comments":true,"path":"2024/10/07/å¤©æ°”é¢„æŠ¥æ¨é€/","permalink":"https://jiang07shuai06.github.io/2024/10/07/%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5%E6%8E%A8%E9%80%81/","excerpt":"","text":"ä¸€ã€ç”³è¯·å¾®ä¿¡æµ‹è¯•å…¬ä¼—å·ï¼ˆhttps://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/loginï¼‰ è·å–åˆ°è¿™å››ä¸ªå€¼ appID, appSecret, openId, template_id æƒ³è®©è°æ”¶æ¶ˆæ¯ï¼Œè°å°±ç”¨å¾®ä¿¡æ‰«äºŒç»´ç ï¼Œåˆ·æ–°é¡µé¢åå³å‡ºç°åœ¨ç”¨æˆ·åˆ—è¡¨ï¼Œè·å–å¾®ä¿¡å·ï¼ˆopenIdï¼‰ æ–°å¢æµ‹è¯•æ¨¡æ¿è·å¾— template_idï¼ˆæ¨¡æ¿IDï¼‰ å¤©æ°”æ¨¡æ¿ï¼š 123456ä»Šå¤©ï¼š&#123;&#123;date.DATA&#125;&#125;åœ°åŒºï¼š&#123;&#123;region.DATA&#125;&#125;å¤©æ°”ï¼š&#123;&#123;weather.DATA&#125;&#125;æ°”æ¸©ï¼š&#123;&#123;temp.DATA&#125;&#125;é£å‘ï¼š&#123;&#123;wind_dir.DATA&#125;&#125;å¯¹ä½ è¯´çš„è¯ï¼š&#123;&#123;today_note.DATA&#125;&#125; è¯¾ç¨‹è¡¨æ¨¡æ¿ï¼š 1æ¶ˆæ¯ï¼š&#123;&#123;message.DATA&#125;&#125; äºŒã€é…ç½®ä»£ç  å°†ä¸Šé¢è·å¾—çš„å‡ ä¸ªå€¼å¡«å…¥ä»£ç è¿™å‡ è¡Œï¼Œå¯åŠ¨å³å¯ 12345678appID = &quot;&quot;appSecret = &quot;&quot;#æ”¶ä¿¡äººIDå³ ç”¨æˆ·åˆ—è¡¨ä¸­çš„å¾®ä¿¡å·ï¼Œè§ä¸Šæ–‡openId = &quot;&quot;# å¤©æ°”é¢„æŠ¥æ¨¡æ¿IDweather_template_id = &quot;&quot;# æ—¶é—´è¡¨æ¨¡æ¿IDtimetable_template_id = &quot;&quot; å®šæ—¶ä»»åŠ¡ï¼ˆæ ¹æ®éœ€æ±‚è¿›è¡Œä¿®æ”¹è¿™å‡ è¡Œï¼‰ 12345schedule.every().day.at(&quot;08:00&quot;).do(weather_report, &quot;åŒ—äº¬&quot;)# schedule.every().monday.at(&quot;13:30&quot;).do(timetable, &quot;è¿˜æœ‰15åˆ†é’Ÿå¼€å§‹ä¸‹åˆçš„è¯¾ç¨‹&quot;)while True: schedule.run_pending() time.sleep(1) å®Œæˆä»£ç å¦‚ä¸‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166# å®‰è£…ä¾èµ– pip3 install requests html5lib bs4 scheduleimport timeimport requestsimport jsonimport schedulefrom bs4 import BeautifulSoup# ä»æµ‹è¯•å·ä¿¡æ¯è·å–appID = &quot;wx1c904b832908e3d7&quot;appSecret = &quot;024e7a99b9bd93e4ec2ba0e61cb99869&quot;#æ”¶ä¿¡äººIDå³ ç”¨æˆ·åˆ—è¡¨ä¸­çš„å¾®ä¿¡å·ï¼Œè§ä¸Šæ–‡openId = &quot;oLg156sEhzpHX3f6OKG6HaCTid9s&quot;# å¤©æ°”é¢„æŠ¥æ¨¡æ¿IDweather_template_id = &quot;T00eYDomN3GOBXOTqTYhX27Nqp-vCdDO2xHKAK1ElH8&quot;# æ—¶é—´è¡¨æ¨¡æ¿IDtimetable_template_id = &quot;kg29LwRP6--uo6Xq3mm-aRyJFaF_Pe2SsnUjYq23YpA&quot;def get_weather(my_city): urls = [&quot;http://www.weather.com.cn/textFC/hb.shtml&quot;, &quot;http://www.weather.com.cn/textFC/db.shtml&quot;, &quot;http://www.weather.com.cn/textFC/hd.shtml&quot;, &quot;http://www.weather.com.cn/textFC/hz.shtml&quot;, &quot;http://www.weather.com.cn/textFC/hn.shtml&quot;, &quot;http://www.weather.com.cn/textFC/xb.shtml&quot;, &quot;http://www.weather.com.cn/textFC/xn.shtml&quot; ] for url in urls: resp = requests.get(url) text = resp.content.decode(&quot;utf-8&quot;) soup = BeautifulSoup(text, &#x27;html5lib&#x27;) div_conMidtab = soup.find(&quot;div&quot;, class_=&quot;conMidtab&quot;) tables = div_conMidtab.find_all(&quot;table&quot;) for table in tables: trs = table.find_all(&quot;tr&quot;)[2:] for index, tr in enumerate(trs): tds = tr.find_all(&quot;td&quot;) # è¿™é‡Œå€’ç€æ•°ï¼Œå› ä¸ºæ¯ä¸ªçœä¼šçš„tdç»“æ„è·Ÿå…¶ä»–ä¸ä¸€æ · city_td = tds[-8] this_city = list(city_td.stripped_strings)[0] if this_city == my_city: high_temp_td = tds[-5] low_temp_td = tds[-2] weather_type_day_td = tds[-7] weather_type_night_td = tds[-4] wind_td_day = tds[-6] wind_td_day_night = tds[-3] high_temp = list(high_temp_td.stripped_strings)[0] low_temp = list(low_temp_td.stripped_strings)[0] weather_typ_day = list(weather_type_day_td.stripped_strings)[0] weather_type_night = list(weather_type_night_td.stripped_strings)[0] wind_day = list(wind_td_day.stripped_strings)[0] + list(wind_td_day.stripped_strings)[1] wind_night = list(wind_td_day_night.stripped_strings)[0] + list(wind_td_day_night.stripped_strings)[1] # å¦‚æœæ²¡æœ‰ç™½å¤©çš„æ•°æ®å°±ä½¿ç”¨å¤œé—´çš„ temp = f&quot;&#123;low_temp&#125;â€”â€”&#123;high_temp&#125;æ‘„æ°åº¦&quot; if high_temp != &quot;-&quot; else f&quot;&#123;low_temp&#125;æ‘„æ°åº¦&quot; weather_typ = weather_typ_day if weather_typ_day != &quot;-&quot; else weather_type_night wind = f&quot;&#123;wind_day&#125;&quot; if wind_day != &quot;--&quot; else f&quot;&#123;wind_night&#125;&quot; return this_city, temp, weather_typ, winddef get_access_token(): # è·å–access tokençš„url url = &#x27;https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=&#123;&#125;&amp;secret=&#123;&#125;&#x27; \\ .format(appID.strip(), appSecret.strip()) response = requests.get(url).json() print(response) access_token = response.get(&#x27;access_token&#x27;) return access_tokendef get_daily_love(): # æ¯æ—¥ä¸€å¥æƒ…è¯ url = &quot;https://api.lovelive.tools/api/SweetNothings/Serialization/Json&quot; r = requests.get(url) all_dict = json.loads(r.text) sentence = all_dict[&#x27;returnObj&#x27;][0] daily_love = sentence return daily_lovedef send_weather(access_token, weather): # touser å°±æ˜¯ openID # template_id å°±æ˜¯æ¨¡æ¿ID # url å°±æ˜¯ç‚¹å‡»æ¨¡æ¿è·³è½¬çš„url # dataå°±æŒ‰è¿™ç§æ ¼å¼å†™ï¼Œtimeå’Œtextå°±æ˜¯ä¹‹å‰&#123;&#123;time.DATA&#125;&#125;ä¸­çš„é‚£ä¸ªtimeï¼Œvalueå°±æ˜¯ä½ è¦æ›¿æ¢DATAçš„å€¼ import datetime today = datetime.date.today() today_str = today.strftime(&quot;%Yå¹´%mæœˆ%dæ—¥&quot;) body = &#123; &quot;touser&quot;: openId.strip(), &quot;template_id&quot;: weather_template_id.strip(), &quot;url&quot;: &quot;https://weixin.qq.com&quot;, &quot;data&quot;: &#123; &quot;date&quot;: &#123; &quot;value&quot;: today_str &#125;, &quot;region&quot;: &#123; &quot;value&quot;: weather[0] &#125;, &quot;weather&quot;: &#123; &quot;value&quot;: weather[2] &#125;, &quot;temp&quot;: &#123; &quot;value&quot;: weather[1] &#125;, &quot;wind_dir&quot;: &#123; &quot;value&quot;: weather[3] &#125;, &quot;today_note&quot;: &#123; &quot;value&quot;: get_daily_love() &#125; &#125; &#125; url = &#x27;https://api.weixin.qq.com/cgi-bin/message/template/send?access_token=&#123;&#125;&#x27;.format(access_token) print(requests.post(url, json.dumps(body)).text)def send_timetable(access_token, message): body = &#123; &quot;touser&quot;: openId, &quot;template_id&quot;: timetable_template_id.strip(), &quot;url&quot;: &quot;https://weixin.qq.com&quot;, &quot;data&quot;: &#123; &quot;message&quot;: &#123; &quot;value&quot;: message &#125;, &#125; &#125; url = &#x27;https://api.weixin.qq.com/cgi-bin/message/template/send?access_token=&#123;&#125;&#x27;.format(access_token) print(requests.post(url, json.dumps(body)).text)def weather_report(city): # 1.è·å–access_token access_token = get_access_token() # 2. è·å–å¤©æ°” weather = get_weather(city) print(f&quot;å¤©æ°”ä¿¡æ¯ï¼š &#123;weather&#125;&quot;) # 3. å‘é€æ¶ˆæ¯ send_weather(access_token, weather)def timetable(message): # 1.è·å–access_token access_token = get_access_token() # 3. å‘é€æ¶ˆæ¯ send_timetable(access_token, message)if __name__ == &#x27;__main__&#x27;: weather_report(&quot;æ²³åŒ—&quot;) # timetable(&quot;ç¬¬äºŒæ•™å­¦æ¥¼ååˆ†é’Ÿåå¼€å§‹è‹±è¯­è¯¾&quot;) # schedule.every().day.at(&quot;08:00&quot;).do(weather_report, &quot;åŒ—äº¬&quot;) # schedule.every().monday.at(&quot;13:30&quot;).do(timetable, &quot;è¿˜æœ‰15åˆ†é’Ÿå¼€å§‹ä¸‹åˆçš„è¯¾ç¨‹&quot;) #while True: # schedule.run_pending() # time.sleep(1) åŸåˆ›æ–‡æ¡£é“¾æ¥ï¼šhttps://www.bilibili.com/read/cv28928153/ åŸåˆ›è§†é¢‘é“¾æ¥ï¼šhttps://www.bilibili.com/video/BV1Ng4y1r7EP/?spm_id_from=333.880.my_history.page.click&amp;vd_source=576ff0210b33e8823a0a538d3f79f11f","categories":[{"name":"æŠ€æœ¯åˆ†äº«","slug":"æŠ€æœ¯åˆ†äº«","permalink":"https://jiang07shuai06.github.io/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://jiang07shuai06.github.io/tags/Python/"}]},{"title":"å¤–æ˜Ÿäººå…¥ä¾µ","slug":"å¤–æ˜Ÿäººå…¥ä¾µ","date":"2024-10-04T11:05:33.000Z","updated":"2024-10-26T02:30:49.441Z","comments":true,"path":"2024/10/04/å¤–æ˜Ÿäººå…¥ä¾µ/","permalink":"https://jiang07shuai06.github.io/2024/10/04/%E5%A4%96%E6%98%9F%E4%BA%BA%E5%85%A5%E4%BE%B5/","excerpt":"","text":"é‡åˆ°çš„é—®é¢˜åŠæ³¨æ„äº‹é¡¹ï¼š ç¼–å†™è®¡åˆ†æ¨¡å— scoreborad.py æ—¶ï¼Œå˜é‡å¼•ç”¨é”™è¯¯ï¼Œæ²¡ææ¸…æ¥šä½¿ç”¨çš„æ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’ å‚è€ƒé“¾æ¥ https://blog.csdn.net/hohaizx/article/details/78427406 é£èˆ¹æ•°é‡ä¸è®¾ç½®æ¨¡å— settings.py ä¸­çš„é£èˆ¹è®¾ç½®ç›¸å…³ å¤–æ˜Ÿäººã€å­å¼¹ã€é£èˆ¹ç§»åŠ¨é€Ÿåº¦ä»¥åŠå¹…åº¦ä¸è®¾ç½®æ¨¡å— settings.py ä¸­çš„ initialize_dynamic_settings å‡½æ•°è®¾ç½®ç›¸å…³ å‚è€ƒèµ„æ–™åŠæºç ï¼š å‚è€ƒä¹¦ç±ã€ŠPythonç¼–ç¨‹â€”â€”ä»å…¥é—¨åˆ°å®è·µã€‹ å‚è€ƒæ•™ç¨‹é“¾æ¥ https://www.modb.pro/db/49581 é€šè¿‡ç™¾åº¦ç½‘ç›˜åˆ†äº«çš„æ–‡ä»¶ï¼šalien_invasion_2.0.zip é“¾æ¥ï¼šhttps://pan.baidu.com/s/1NTkG7Mk_5sw4uzQLVU8ieQ?pwd=byte æå–ç ï¼šbyte","categories":[{"name":"æŠ€æœ¯åˆ†äº«","slug":"æŠ€æœ¯åˆ†äº«","permalink":"https://jiang07shuai06.github.io/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://jiang07shuai06.github.io/tags/Python/"}]}],"categories":[{"name":"æŠ€æœ¯åˆ†æ","slug":"æŠ€æœ¯åˆ†æ","permalink":"https://jiang07shuai06.github.io/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E6%9E%90/"},{"name":"æŠ€æœ¯åˆ†äº«","slug":"æŠ€æœ¯åˆ†äº«","permalink":"https://jiang07shuai06.github.io/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"}],"tags":[{"name":"iptables","slug":"iptables","permalink":"https://jiang07shuai06.github.io/tags/iptables/"},{"name":"ç½‘ç»œåè®®","slug":"ç½‘ç»œåè®®","permalink":"https://jiang07shuai06.github.io/tags/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/"},{"name":"åšå®¢","slug":"åšå®¢","permalink":"https://jiang07shuai06.github.io/tags/%E5%8D%9A%E5%AE%A2/"},{"name":"Python","slug":"Python","permalink":"https://jiang07shuai06.github.io/tags/Python/"}]}